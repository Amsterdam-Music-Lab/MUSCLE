/**
 * Copyright (c) 2025 Bas Cornelissen
 * SPDX-License-Identifier: MIT
 * 
 * This file is part of the MUSCLE project by Amsterdam Music Lab.
 * Licensed under the MIT License. See LICENSE file in the project root.
 */
 
 @import "@/scss/utils.scss";

.card {
    // Note that the cards need not be square: this is a consequence
    // of being in a square container
    height: 100%;
    cursor: pointer;
    overflow: hidden;
    
    // Todo!
    border-radius: 1.5em;
    
    box-shadow: 0 0 2em rgba(0,0,0,0.1);
    
    transition: transform ease-out 400ms, box-shadow ease-out 400ms;
    transform-style: preserve-3d;
    perspective: 1000px; // Required for 3d flipping effect
}

.card:not(.disabled):not(.noEvents):hover {
    transform: rotateY(20deg) rotateX(3deg);
}

.flipped {
    // Flip the card 180deg
    transform: rotateY(180deg);

    &:not(.disabled):not(.noEvents):hover {
        transform: rotateY(160deg) rotateX(3deg);    
    }
}

.front,
.back {
    // Ensure the back and front fill the entire card. 
    width: 100%;
    height: 100%;
}

.back {
    display: flex;
    justify-content: center;
}

.front {
    transform: rotateY(180deg);
}


.disabled {
    pointer-events: none;
    opacity: .8;
}

.noEvents {
    pointer-events: none;
}

///
/// Animations
/// 

@keyframes memory {
    20% { transform: scale(1.15); }
    40% { transform: scale(1); }
    60% { transform: scale(1.1); }
    80% { transform: scale(1); }
    95% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

@keyframes lucky {
    40% { transform: scale(1.15); }
    80% { transform: scale(1); }
    95% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

@keyframes nomatch {
    10% { transform: rotate(13deg); }
    20% { transform: rotate(-13deg); }
    30% { transform: rotate(11deg); }
    40% { transform: rotate(-11deg); }
    50% { transform: rotate(10deg); }
    60% { transform: rotate(-10deg); }
    70% { transform: rotate(8deg); }
    80% { transform: rotate(-8deg); }
    95% { transform: rotate(5deg); }
    100% { transform: rotate(0deg); }
}

.fbnomatch, 
.fbmisremembered {
    animation-duration: 0.7s;
    animation-name: nomatch;
    animation-iteration-count: 1;
}

.fblucky {
    animation-duration: 0.55s;
    animation-name: lucky;
    animation-iteration-count: 1;
}

.fbmemory {
    animation-duration: 0.8s;
    animation-name: memory;
    animation-iteration-count: 1;
}
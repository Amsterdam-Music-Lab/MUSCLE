# Generated by Django 4.2.14 on 2024-07-31 13:41

from django.db import migrations


def migrate_experiment_content(apps, schema_editor):
    Experiment = apps.get_model("experiment", "Experiment")
    ExperimentTranslatedContent = apps.get_model("experiment", "ExperimentTranslatedContent")

    for experiment in Experiment.objects.all():
        ExperimentTranslatedContent.objects.create(
            experiment=experiment,
            index=0,
            language="en",  # Set English as default language
            name=experiment.name,
            description=experiment.description,
            consent=experiment.consent,
            about_content=experiment.about_content,
        )


def reverse_migrate_experiment_content(apps, schema_editor):
    ExperimentTranslatedContent = apps.get_model("experiment", "ExperimentTranslatedContent")
    ExperimentTranslatedContent.objects.filter(language="en").delete()


class Migration(migrations.Migration):
    dependencies = [
        ("experiment", "0049_experimenttranslatedcontent"),
    ]

    operations = [
        migrations.RunPython(migrate_experiment_content, reverse_migrate_experiment_content),
    ]
